#!/usr/bin/make -f

%:
	dh $@ --with python3

# Needed to suppress:
# dpkg-shlibdeps: warning: couldn't find library libwiringPi.so needed by debian/pt-device-manager/usr/lib/pt-device-manager/poweroff-legacy (ELF format: 'elf32-little'; RPATH: '')
# dpkg-shlibdeps: error: couldn't find library libc.so.6 needed by debian/pt-device-manager/usr/lib/pt-device-manager/poweroff-legacy (ELF format: 'elf32-little'; RPATH: '')
# dpkg-shlibdeps: error: cannot continue due to the error above
override_dh_shlibdeps:
	dh_shlibdeps -Xpoweroff-legacy

override_dh_installsystemd:
	dh_installsystemd --name=pt-device-manager
	dh_installsystemd --name=pt-oled-startup-anim --no-start --no-stop-on-upgrade
	dh_installsystemd --name=pt-poweroff --no-start --no-stop-on-upgrade
	dh_installsystemd --name=pt-reboot --no-start --no-stop-on-upgrade

# Needed to suppress Lintian error:
# missing-dependency-on-libc needed by usr/lib/pt-device-manager/poweroff-legacy

override_dh_gencontrol:
	dh_gencontrol -- -Vshlibs:Depends="libc6 (>= 2.24-11)"
